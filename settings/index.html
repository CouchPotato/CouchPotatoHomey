<!doctype html>
<html>
<head>
	<script type="text/javascript" src="/manager/webserver/assets/js/jquery.js"></script>
</head>
<body>
	<h1>CouchPotato Settings</h1>
	<p>Please make sure to fill in the api settings before trying anything, there is no error checking yet</p>

	<h2>API settings</h2>
	<div class="field row">
		<label for="host">Host</label>
		<input id="host" type="text" value="" />
	</div>
	<div class="field row">
		<label for="api">API key</label>
		<input id="api" type="text" value="" />
	</div>

	<h2>Webhook</h2>
	<p>This lets CouchPotato send snatched and download updates to your Homey. Create a new one at <a href="https://webhooks.athom.com/" target="_blank">webhooks.athom.com</a></p>
	<div class="field row">
		<label for="webhook_url">Url</label>
		<input id="webhook_url" type="text" value="" />
	</div>
	<div class="field row">
		<label for="webhook_id">ID</label>
		<input id="webhook_id" type="text" value="" />
	</div>
	<div class="field row">
		<label for="webhook_secret">Secret</label>
		<input id="webhook_secret" type="text" value="" />
	</div>

	<h2>Other settings</h2>
	<div class="field">
		<input id="use_default" type="checkbox" value="1" />
		<label for="use_default">Use default speech settings</label>
		<p>Listen to "Add the movie Moviename" or "Download the movie Moviename". Otherwise use your own flow to trigger CouchPotato.</p>
	</div>
	<div class="field">
		<input id="skip_confirm" type="checkbox" value="1" />
		<label for="skip_confirm">Don't confirm movie before adding</label>
		<p>For when you're feeling lucky. Not recommended though.</p>
	</div>

	<!--// Connect qualities, maybe allow people to fill in words they want to trigger the qualities?-->
	<!--// HD -> HD, high definition-->
	<!--// Best -> Best-->
	<!--// 3D -> 3D-->

	<script type="text/javascript">

		var onHomeyReady = function(){
			var loaded = 0,
				inputs = $('input');

			inputs.each(function(nr, el){
				el = $(el);

				Homey.get(el.attr('id'), function(er, value){
					if(el.attr('type') == 'checkbox'){
						el.prop('checked', value);
					}
					else {
						el.val(value);
					}

					loaded++;

					if(loaded == inputs.length)
						Homey.ready();
				});

			});
		};

		$('body').on('change keyup paste', 'input', function(e){
			var el = $(e.currentTarget);
			var value = el.attr('type') == 'checkbox' ? el.prop('checked') : el.val();
			Homey.set(el.prop('id'), value);
		});

	</script>
